<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1509px" preserveAspectRatio="none" style="width:2333px;height:1509px;background:#FFFFFF;" version="1.1" viewBox="0 0 2333 1509" width="2333px" zoomAndPan="magnify"><title>Prescription List (POST /prescriptions/search) &#8212; with Policy Effective Window Filter</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="660.1328" x="832.7166" y="27.9951">Prescription List (POST /prescriptions/search) &#8212; with Policy Effective Window Filter</text><rect fill="none" height="739.9922" style="stroke:#000000;stroke-width:1.5;" width="2114.1348" x="202.4312" y="426.9219"/><rect fill="none" height="119.6641" style="stroke:#000000;stroke-width:1.5;" width="1341.7827" x="672.418" y="588.3906"/><rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:1.5;" width="449.8477" x="202.4312" y="1308.3125"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="1310.25" width="8" x="24.2651" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="28" x2="28" y1="118.5938" y2="1428.8438"/></g><g><title>CVS Prescription Service</title><rect fill="#000000" fill-opacity="0.00000" height="1310.25" width="8" x="301.4478" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="305.4312" x2="305.4312" y1="118.5938" y2="1428.8438"/></g><g><title>Claims Service</title><rect fill="#000000" fill-opacity="0.00000" height="1310.25" width="8" x="737.0464" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="740.418" x2="740.418" y1="118.5938" y2="1428.8438"/></g><g><title>Claims Cache</title><rect fill="#000000" fill-opacity="0.00000" height="1310.25" width="8" x="1309.7861" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1313.2593" x2="1313.2593" y1="118.5938" y2="1428.8438"/></g><g><title>CVS Auth Service</title><rect fill="#000000" fill-opacity="0.00000" height="1310.25" width="8" x="1438.1597" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1441.313" x2="1441.313" y1="118.5938" y2="1428.8438"/></g><g><title>Core Proxy</title><rect fill="#000000" fill-opacity="0.00000" height="1310.25" width="8" x="1596.127" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1600.0063" x2="1600.0063" y1="118.5938" y2="1428.8438"/></g><g><title>Member Profile</title><rect fill="#000000" fill-opacity="0.00000" height="1310.25" width="8" x="1763.4731" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1767.2476" x2="1767.2476" y1="118.5938" y2="1428.8438"/></g><g><title>CVS Backend</title><rect fill="#000000" fill-opacity="0.00000" height="1310.25" width="8" x="1925.4497" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1928.6987" x2="1928.6987" y1="118.5938" y2="1428.8438"/></g><g><title>UAF .Privacy.</title><rect fill="#000000" fill-opacity="0.00000" height="1310.25" width="8" x="2064.2935" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2068.2007" x2="2068.2007" y1="118.5938" y2="1428.8438"/></g><g><title>Eligibility Service</title><rect fill="#000000" fill-opacity="0.00000" height="1310.25" width="8" x="2215.4761" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2219.3862" x2="2219.3862" y1="118.5938" y2="1428.8438"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="5" y="115.292">Client</text><ellipse cx="28.2651" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M28.2651,58.7969 L28.2651,85.7969 M15.2651,66.7969 L41.2651,66.7969 M28.2651,85.7969 L15.2651,100.7969 M28.2651,85.7969 L41.2651,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="5" y="1440.8389">Client</text><ellipse cx="28.2651" cy="1452.6406" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M28.2651,1460.6406 L28.2651,1487.6406 M15.2651,1468.6406 L41.2651,1468.6406 M28.2651,1487.6406 L15.2651,1502.6406 M28.2651,1487.6406 L41.2651,1502.6406" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="RxSvc"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="186.0332" x="212.4312" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172.0332" x="219.4312" y="107.292">CVS Prescription Service</text></g><g class="participant participant-tail" data-participant="RxSvc"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="186.0332" x="212.4312" y="1427.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172.0332" x="219.4312" y="1447.8389">CVS Prescription Service</text></g><g class="participant participant-head" data-participant="Claims"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.2568" x="682.418" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.2568" x="689.418" y="107.292">Claims Service</text></g><g class="participant participant-tail" data-participant="Claims"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.2568" x="682.418" y="1427.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.2568" x="689.418" y="1447.8389">Claims Service</text></g><g class="participant participant-head" data-participant="Cache"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95.0537" x="1263.2593" y="115.292">Claims Cache</text><path d="M1295.7861,66.2969 C1295.7861,56.2969 1313.7861,56.2969 1313.7861,56.2969 C1313.7861,56.2969 1331.7861,56.2969 1331.7861,66.2969 L1331.7861,92.2969 C1331.7861,102.2969 1313.7861,102.2969 1313.7861,102.2969 C1313.7861,102.2969 1295.7861,102.2969 1295.7861,92.2969 L1295.7861,66.2969" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1295.7861,66.2969 C1295.7861,76.2969 1313.7861,76.2969 1313.7861,76.2969 C1313.7861,76.2969 1331.7861,76.2969 1331.7861,66.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Cache"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95.0537" x="1263.2593" y="1440.8389">Claims Cache</text><path d="M1295.7861,1454.1406 C1295.7861,1444.1406 1313.7861,1444.1406 1313.7861,1444.1406 C1313.7861,1444.1406 1331.7861,1444.1406 1331.7861,1454.1406 L1331.7861,1480.1406 C1331.7861,1490.1406 1313.7861,1490.1406 1313.7861,1490.1406 C1313.7861,1490.1406 1295.7861,1490.1406 1295.7861,1480.1406 L1295.7861,1454.1406" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1295.7861,1454.1406 C1295.7861,1464.1406 1313.7861,1464.1406 1313.7861,1464.1406 C1313.7861,1464.1406 1331.7861,1464.1406 1331.7861,1454.1406" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="CVSAuth"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135.6934" x="1374.313" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.6934" x="1381.313" y="107.292">CVS Auth Service</text></g><g class="participant participant-tail" data-participant="CVSAuth"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="135.6934" x="1374.313" y="1427.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.6934" x="1381.313" y="1447.8389">CVS Auth Service</text></g><g class="participant participant-head" data-participant="CoreProxy"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160.2412" x="1520.0063" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.4941" x="1561.8799" y="90.9951">Core Proxy</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146.2412" x="1527.0063" y="107.292">(/userauthorizations)</text></g><g class="participant participant-tail" data-participant="CoreProxy"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160.2412" x="1520.0063" y="1427.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.4941" x="1561.8799" y="1447.8389">Core Proxy</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146.2412" x="1527.0063" y="1464.1357">(/userauthorizations)</text></g><g class="participant participant-head" data-participant="MemberProfile"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154.4512" x="1690.2476" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.1211" x="1714.4126" y="90.9951">Member Profile</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140.4512" x="1697.2476" y="107.292">(/familyaccessrules)</text></g><g class="participant participant-tail" data-participant="MemberProfile"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154.4512" x="1690.2476" y="1427.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.1211" x="1714.4126" y="1447.8389">Member Profile</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140.4512" x="1697.2476" y="1464.1357">(/familyaccessrules)</text></g><g class="participant participant-head" data-participant="CVSBackend"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.502" x="1854.6987" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.0508" x="1882.9243" y="90.9951">CVS Backend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.502" x="1861.6987" y="107.292">(/getClaimsHistory)</text></g><g class="participant participant-tail" data-participant="CVSBackend"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.502" x="1854.6987" y="1427.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93.0508" x="1882.9243" y="1447.8389">CVS Backend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.502" x="1861.6987" y="1464.1357">(/getClaimsHistory)</text></g><g class="participant participant-head" data-participant="UAF"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108.1855" x="2014.2007" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.1855" x="2021.2007" y="107.292">UAF (Privacy)</text></g><g class="participant participant-tail" data-participant="UAF"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108.1855" x="2014.2007" y="1427.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.1855" x="2021.2007" y="1447.8389">UAF (Privacy)</text></g><g class="participant participant-head" data-participant="Eligibility"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="174.1797" x="2132.3862" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.9229" x="2159.5146" y="90.9951">Eligibility Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.1797" x="2139.3862" y="107.292">(Aetna source of truth)</text></g><g class="participant participant-tail" data-participant="Eligibility"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="174.1797" x="2132.3862" y="1427.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.9229" x="2159.5146" y="1447.8389">Eligibility Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.1797" x="2139.3862" y="1464.1357">(Aetna source of truth)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2326.5659" x="0" y="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2326.5659" y1="149.1602" y2="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2326.5659" y1="152.1602" y2="152.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="122.3481" x="1102.1089" y="138.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="103.8223" x="1108.1089" y="154.6606">Client request</text><g class="message" data-participant-1="Client" data-participant-2="RxSvc"><polygon fill="#181818" points="293.4478,219.125,303.4478,223.125,293.4478,227.125,297.4478,223.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="28.2651" x2="299.4478" y1="223.125" y2="223.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.0239" x="35.2651" y="187.7935">POST /prescriptions/search</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236.7549" x="35.2651" y="202.9263">body: { membershipResourceIds[] }</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.2153" x="35.2651" y="218.0591">query: startDate, endDate</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2326.5659" x="0" y="251.6914"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2326.5659" y1="251.6914" y2="251.6914"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2326.5659" y1="254.6914" y2="254.6914"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="155.3877" x="1085.5891" y="241.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="136.8618" x="1091.5891" y="257.1919">Delegate to claims</text><g class="message" data-participant-1="RxSvc" data-participant-2="Claims"><polygon fill="#181818" points="729.0464,306.5234,739.0464,310.5234,729.0464,314.5234,733.0464,310.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="305.4478" x2="735.0464" y1="310.5234" y2="310.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.7876" x="312.4478" y="290.3247">GET /pharmacyclaims</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="314.8691" x="312.4478" y="305.4575">(membershipResourceId(s), startDate, endDate)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2326.5659" x="0" y="339.0898"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2326.5659" y1="339.0898" y2="339.0898"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2326.5659" y1="342.0898" y2="342.0898"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="109.272" x="1108.647" y="328.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="90.7461" x="1114.647" y="344.5903">Cache check</text><g class="message" data-participant-1="Claims" data-participant-2="Cache"><polygon fill="#181818" points="1301.7861,378.7891,1311.7861,382.7891,1301.7861,386.7891,1305.7861,382.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="741.0464" x2="1307.7861" y1="382.7891" y2="382.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="541.4868" x="748.0464" y="377.7231">GET claims-v1-{acctIdSource~acctIdValue}-{mshipResId}-{startDate}-{endDate}</text></g><g class="message" data-participant-1="Cache" data-participant-2="Claims"><polygon fill="#181818" points="752.0464,407.9219,742.0464,411.9219,752.0464,415.9219,748.0464,411.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="746.0464" x2="1312.7861" y1="411.9219" y2="411.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.8169" x="758.0464" y="406.856">Hit? data / Miss</text></g><path d="M202.4312,426.9219 L266.874,426.9219 L266.874,434.0547 L256.874,444.0547 L202.4312,444.0547 L202.4312,426.9219" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="739.9922" style="stroke:#000000;stroke-width:1.5;" width="2114.1348" x="202.4312" y="426.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="217.4312" y="439.9888">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="68.0518" x="281.874" y="439.1323">[Cache hit]</text><g class="message" data-participant-1="Claims" data-participant-2="RxSvc"><polygon fill="#181818" points="316.4478,461.1875,306.4478,465.1875,316.4478,469.1875,312.4478,465.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="310.4478" x2="740.0464" y1="465.1875" y2="465.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.793" x="322.4478" y="460.1216">Pharmacy claims (cached)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="202.4312" x2="2316.5659" y1="474.1875" y2="474.1875"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79.519" x="207.4312" y="484.3979">[Cache miss]</text><path d="M652,492.9922 L652,517.9922 L828,517.9922 L828,502.9922 L818,492.9922 L652,492.9922" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M818,492.9922 L818,502.9922 L828,502.9922 L818,492.9922" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155.3208" x="658" y="510.0591">Validate membership id</text><g class="message" data-participant-1="Claims" data-participant-2="CVSAuth"><polygon fill="#181818" points="1430.1597,540.2578,1440.1597,544.2578,1430.1597,548.2578,1434.1597,544.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="741.0464" x2="1436.1597" y1="544.2578" y2="544.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.4946" x="748.0464" y="539.1919">GET /cvs_auth_token_data</text></g><g class="message" data-participant-1="CVSAuth" data-participant-2="Claims"><polygon fill="#181818" points="752.0464,569.3906,742.0464,573.3906,752.0464,577.3906,748.0464,573.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="746.0464" x2="1441.1597" y1="573.3906" y2="573.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.896" x="758.0464" y="568.3247">tokenId + members[]</text></g><path d="M672.418,588.3906 L741.9072,588.3906 L741.9072,595.5234 L731.9072,605.5234 L672.418,605.5234 L672.418,588.3906" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="119.6641" style="stroke:#000000;stroke-width:1.5;" width="1341.7827" x="672.418" y="588.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24.4893" x="687.418" y="601.4575">par</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72.7246" x="756.9072" y="600.6011">[In parallel]</text><g class="message" data-participant-1="Claims" data-participant-2="CoreProxy"><polygon fill="#181818" points="1588.127,622.6563,1598.127,626.6563,1588.127,630.6563,1592.127,626.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="741.0464" x2="1594.127" y1="626.6563" y2="626.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.8931" x="748.0464" y="621.5903">/userauthorizations (EIE headers)</text></g><g class="message" data-participant-1="Claims" data-participant-2="MemberProfile"><polygon fill="#181818" points="1755.4731,651.7891,1765.4731,655.7891,1755.4731,659.7891,1759.4731,655.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="741.0464" x2="1761.4731" y1="655.7891" y2="655.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.2754" x="748.0464" y="650.7231">/familyaccessrules</text></g><g class="message" data-participant-1="Claims" data-participant-2="CVSBackend"><polygon fill="#181818" points="1917.4497,696.0547,1927.4497,700.0547,1917.4497,704.0547,1921.4497,700.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="741.0464" x2="1923.4497" y1="700.0547" y2="700.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.6797" x="748.0464" y="679.856">/getClaimsHistory</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="283.0674" x="748.0464" y="694.9888">(tokenId, startDate, endDate, refId, apiKey)</text></g><g class="message" data-participant-1="Claims" data-participant-2="Claims"><line style="stroke:#181818;stroke-width:1;" x1="741.0464" x2="783.0464" y1="736.1875" y2="736.1875"/><line style="stroke:#181818;stroke-width:1;" x1="783.0464" x2="783.0464" y1="736.1875" y2="749.1875"/><line style="stroke:#181818;stroke-width:1;" x1="742.0464" x2="783.0464" y1="749.1875" y2="749.1875"/><polygon fill="#181818" points="752.0464,745.1875,742.0464,749.1875,752.0464,753.1875,748.0464,749.1875" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="425.1279" x="748.0464" y="731.1216">Apply Family Access Rules (indexId, age, sensitive drug visibility)</text></g><g class="message" data-participant-1="Claims" data-participant-2="UAF"><polygon fill="#181818" points="2056.2935,774.3203,2066.2935,778.3203,2056.2935,782.3203,2060.2935,778.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="741.0464" x2="2062.2935" y1="778.3203" y2="778.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="351.6729" x="748.0464" y="773.2544">Check privacy entitlements (EIE headers, memberIds)</text></g><g class="message" data-participant-1="UAF" data-participant-2="Claims"><polygon fill="#181818" points="752.0464,803.4531,742.0464,807.4531,752.0464,811.4531,748.0464,807.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="746.0464" x2="2067.2935" y1="807.4531" y2="807.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.0337" x="758.0464" y="802.3872">Entitlements &amp; restrictions</text></g><g class="message" data-participant-1="Claims" data-participant-2="Claims"><line style="stroke:#181818;stroke-width:1;" x1="741.0464" x2="783.0464" y1="836.5859" y2="836.5859"/><line style="stroke:#181818;stroke-width:1;" x1="783.0464" x2="783.0464" y1="836.5859" y2="849.5859"/><line style="stroke:#181818;stroke-width:1;" x1="742.0464" x2="783.0464" y1="849.5859" y2="849.5859"/><polygon fill="#181818" points="752.0464,845.5859,742.0464,849.5859,752.0464,853.5859,748.0464,849.5859" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.8442" x="748.0464" y="831.52">Apply UAF restrictions</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2326.5659" x="0" y="878.1523"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2326.5659" y1="878.1523" y2="878.1523"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2326.5659" y1="881.1523" y2="881.1523"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="281.687" x="1022.4395" y="867.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="263.1611" x="1028.4395" y="883.6528">NEW: Policy Effective Window Filter</text><g class="message" data-participant-1="Claims" data-participant-2="Eligibility"><polygon fill="#181818" points="2207.4761,917.8516,2217.4761,921.8516,2207.4761,925.8516,2211.4761,921.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="741.0464" x2="2213.4761" y1="921.8516" y2="921.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="352.0854" x="748.0464" y="916.7856">GET coverage windows per membershipResourceId(s)</text></g><g class="message" data-participant-1="Eligibility" data-participant-2="Claims"><polygon fill="#181818" points="752.0464,946.9844,742.0464,950.9844,752.0464,954.9844,748.0464,950.9844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="746.0464" x2="2218.4761" y1="950.9844" y2="950.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="324.8857" x="758.0464" y="945.9185">eligibility windows {effectiveStart, effectiveEnd?}</text></g><g class="message" data-participant-1="Claims" data-participant-2="Claims"><line style="stroke:#181818;stroke-width:1;" x1="741.0464" x2="783.0464" y1="995.25" y2="995.25"/><line style="stroke:#181818;stroke-width:1;" x1="783.0464" x2="783.0464" y1="995.25" y2="1008.25"/><line style="stroke:#181818;stroke-width:1;" x1="742.0464" x2="783.0464" y1="1008.25" y2="1008.25"/><polygon fill="#181818" points="752.0464,1004.25,742.0464,1008.25,752.0464,1012.25,748.0464,1008.25" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194.981" x="748.0464" y="975.0513">Filter claims by policy window</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="558.7397" x="748.0464" y="990.1841">keep if fillDate within [max(policyStart, req.startDate), min(policyEnd?, req.endDate)]</text></g><path d="M746,1021.25 L746,1061.25 L1116,1061.25 L1116,1031.25 L1106,1021.25 L746,1021.25" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1106,1021.25 L1106,1031.25 L1116,1031.25 L1106,1021.25" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="345.2935" x="752" y="1038.3169">Goal: Trim CVS claims that fall outside the member's</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="349.5337" x="752" y="1053.4497">active policy coverage window (carve-out overshoot).</text><g class="message" data-participant-1="Claims" data-participant-2="Claims"><line style="stroke:#181818;stroke-width:1;" x1="741.0464" x2="783.0464" y1="1087.6484" y2="1087.6484"/><line style="stroke:#181818;stroke-width:1;" x1="783.0464" x2="783.0464" y1="1087.6484" y2="1100.6484"/><line style="stroke:#181818;stroke-width:1;" x1="742.0464" x2="783.0464" y1="1100.6484" y2="1100.6484"/><polygon fill="#181818" points="752.0464,1096.6484,742.0464,1100.6484,752.0464,1104.6484,748.0464,1100.6484" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="353.9644" x="748.0464" y="1082.5825">Build mapped claims payload (SDK?API field mapping)</text></g><g class="message" data-participant-1="Claims" data-participant-2="Cache"><polygon fill="#181818" points="1301.7861,1125.7813,1311.7861,1129.7813,1301.7861,1133.7813,1305.7861,1129.7813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="741.0464" x2="1307.7861" y1="1129.7813" y2="1129.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237.3135" x="748.0464" y="1124.7153">PUT claims-v1-... = mapped payload</text></g><g class="message" data-participant-1="Claims" data-participant-2="RxSvc"><polygon fill="#181818" points="316.4478,1154.9141,306.4478,1158.9141,316.4478,1162.9141,312.4478,1158.9141" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="310.4478" x2="740.0464" y1="1158.9141" y2="1158.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.4263" x="322.4478" y="1153.8481">Pharmacy claims (mapped)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2326.5659" x="0" y="1194.4805"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2326.5659" y1="1194.4805" y2="1194.4805"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2326.5659" y1="1197.4805" y2="1197.4805"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="171.3267" x="1077.6196" y="1183.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152.8008" x="1083.6196" y="1199.981">Rx service transform</text><g class="message" data-participant-1="RxSvc" data-participant-2="RxSvc"><line style="stroke:#181818;stroke-width:1;" x1="305.4478" x2="347.4478" y1="1238.1797" y2="1238.1797"/><line style="stroke:#181818;stroke-width:1;" x1="347.4478" x2="347.4478" y1="1238.1797" y2="1251.1797"/><line style="stroke:#181818;stroke-width:1;" x1="306.4478" x2="347.4478" y1="1251.1797" y2="1251.1797"/><polygon fill="#181818" points="316.4478,1247.1797,306.4478,1251.1797,316.4478,1255.1797,312.4478,1251.1797" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="313.1299" x="312.4478" y="1233.1138">Deduplicate by uniqueRxId (keep latest fillDate)</text></g><g class="message" data-participant-1="RxSvc" data-participant-2="RxSvc"><line style="stroke:#181818;stroke-width:1;" x1="305.4478" x2="347.4478" y1="1280.3125" y2="1280.3125"/><line style="stroke:#181818;stroke-width:1;" x1="347.4478" x2="347.4478" y1="1280.3125" y2="1293.3125"/><line style="stroke:#181818;stroke-width:1;" x1="306.4478" x2="347.4478" y1="1293.3125" y2="1293.3125"/><polygon fill="#181818" points="316.4478,1289.3125,306.4478,1293.3125,316.4478,1297.3125,312.4478,1293.3125" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="421.5986" x="312.4478" y="1275.2466">Transform claims ? prescription list (type conversions, title case)</text></g><path d="M202.4312,1308.3125 L271.8823,1308.3125 L271.8823,1315.4453 L261.8823,1325.4453 L202.4312,1325.4453 L202.4312,1308.3125" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:1.5;" width="449.8477" x="202.4312" y="1308.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24.4512" x="217.4312" y="1321.3794">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="270.5957" x="286.8823" y="1320.5229">[Filter by request membershipResourceIds]</text><g class="message" data-participant-1="RxSvc" data-participant-2="RxSvc"><line style="stroke:#181818;stroke-width:1;" x1="305.4478" x2="347.4478" y1="1346.5781" y2="1346.5781"/><line style="stroke:#181818;stroke-width:1;" x1="347.4478" x2="347.4478" y1="1346.5781" y2="1359.5781"/><line style="stroke:#181818;stroke-width:1;" x1="306.4478" x2="347.4478" y1="1359.5781" y2="1359.5781"/><polygon fill="#181818" points="316.4478,1355.5781,306.4478,1359.5781,316.4478,1363.5781,312.4478,1359.5781" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="327.8311" x="312.4478" y="1341.5122">If empty ? no filter; else include only matching IDs</text></g><g class="message" data-participant-1="RxSvc" data-participant-2="Client"><polygon fill="#181818" points="39.2651,1406.8438,29.2651,1410.8438,39.2651,1414.8438,35.2651,1410.8438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="33.2651" x2="304.4478" y1="1410.8438" y2="1410.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.2661" x="45.2651" y="1390.645">200 OK [ ... prescriptionList[] ]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="253.1826" x="45.2651" y="1405.7778">(or 200 empty list / 400 missing dates)</text></g><!--SRC=[ZLRDRkCs4BxhAGPxQ6tKJhP5JowoWJTnTerqku6TpHwI860esY92aIf9UQC6AVeGVS8-IMT8ofKSRzk3OOcS-URtcv6NNWcuiC9nAoilZOQVfVCmkFYul8J3gdFX3frWbXT3-EkFF-6Bz0LS62Lv0xFLId0lDm8-IvsRBt0cbHSsonZtniA9aaBxh6BMIouhfZsyEhbQzgqkXTr8Bbu1Sx1uN6xuZhnYidGzgNYKvSopU-R4LkQ4yI99qDDBkzCQNUyXNItfR4VIM4gCUMnkzE2mTi8ob35M_iP2DePH5QM2K5_vWoZlXINrbLI205QibAfXd0ldRAr4qe-2IUwbgsyPVn0w9u2ry370zrWVOvjXwtgIwIj_cfvX3QtSC9uayQGlCbDoBU-bahvfiu5sfi9h1ixKbWimA_0Meuu87OKiEpfATGKhVgq5jipHKPPEnczY2IVmzIwwqVScRoRm16L8WIjajH3HxZntrxVmVACHsAACy-ZtAVDY11WeFGJxfqA9DRw0Dy1ZxT67O9bSYDcQmBiPkL0mMs8keXp6kS_gm0r7UumD0MAyr4w0F_uGWmqcoH9TH4CHVxpvVlo4jVRpV1cmVuylLqpLuddyL2QxynnVjWRnELbypgAjSIUCzz8V0pKx7C87wHmvnPHFNXNIPm2jIvq2fBZR10quYUV3J2YaJDGj4GsLjS5KcesmMvFehimfmVya2sJUiVEcfKxACj-uEsB9dJVOadVaBKb7cLuqGM2UmtSjzlLjXgBOe33NzCUK4WfFUiPQiarW3o5XC9lFe10iHxZXZcgFPwZ-WewxfhQyGk5Twc7x9F_tjSi86R6YArR9Sz6G9tX3vUePI8cOLfLgu2ou0zFW3op88HZWB1MF0MYDe4ve9yEGpMszXerqYOl37YxIV08deKUhI7-qxcdAb_ZVJz8e9H_vHY0qCxercdNrli6edBUIXrp_IoY4qXMDWIDzVfbzdlp7nY1QTP4x4oVHY_eJqu7hXzGSLAZq5IeZKdV4TICJdVCMwKcqFYsff5ZEzdscy-FdlH4dhnEtxXkeOdWHyqO_286CMG4sdQBM25jJQhWksUCWoYPZE4GFjgs4KwYKEWcGzNZVZgFRbgnMhWjFGpgjGchXTuQf2LnQML8FjwxvWdbO8QV0rDx976TcqTBwswZ8OZrI13k9fhbXDsACsc54kC8OFpn8hKtExE_kjxLKEPIigaJU-bAnHXcMms1vUduylPXZTaGIadhTx-OqMIy-TIVhmS417BMW2Ut_3R-eWyCFroLDzCKZqYfiFjnpJBkLiMLlXoIWKv7N5UQ5IeXLhhN4pRH0Ri8Wb5ZX1Mx0jioqC7OXBhVuoPbZwAv5KE6hopSLRXYZASL4dX442WB73nn2DPLlcmxzQ3VltWsA6TdrORu2KLROyyTOCl8MSNw2i0cavgh6jZ0QALmopx5Drp0_9Vg6R2MiK5jQyXFuuVLh-7WErq3rwCP27v2ulsznJEBN7ub5go74G_WH3sZba07QBcxuDm00]--></g></svg>